{"version":3,"sources":["assets\\src\\SettingManager.js"],"names":["cc","Class","Component","properties","settingLayer","type","Node","tips","tipsLabel","Label","fullScreen","screen","exitFullScreen","requestFullScreen","onLoad","isIOS14Device","sys","os","OS_IOS","isBrowser","isMobile","test","window","navigator","userAgent","MeshBuffer","prototype","checkAndSwitchBuffer","vertexCount","vertexOffset","uploadData","_batcher","_flush","forwardIndiceStartToOffset","switchBuffer","start","game","find","getComponent","stage","openSetting","active","closeSetting","restartGame","autoJump","openTips","string","onOver","quitGame","isQuit","closeTips"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,YAAY,EAAC;AACT,iBAAQ,IADC;AAETC,MAAAA,IAAI,EAACL,EAAE,CAACM;AAFC,KADL;AAKRC,IAAAA,IAAI,EAAC;AACD,iBAAQ,IADP;AAEDF,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFR,KALG;AAURE,IAAAA,SAAS,EAAC;AACN,iBAAQ,IADF;AAENH,MAAAA,IAAI,EAAEL,EAAE,CAACS;AAFH;AAVF,GAHP;AAkBLC,EAAAA,UAlBK,wBAkBO;AACR,QAAGV,EAAE,CAACW,MAAH,CAAUD,UAAV,EAAH,EAA0B;AACtBV,MAAAA,EAAE,CAACW,MAAH,CAAUC,cAAV;AACH,KAFD,MAGI;AACAZ,MAAAA,EAAE,CAACW,MAAH,CAAUE,iBAAV;AACH;AAEJ,GA1BI;AA2BL;AAECC,EAAAA,MA7BI,oBA6BM;AACP,QAAMC,aAAa,GAAGf,EAAE,CAACgB,GAAH,CAAOC,EAAP,KAAcjB,EAAE,CAACgB,GAAH,CAAOE,MAArB,IAA+BlB,EAAE,CAACgB,GAAH,CAAOG,SAAtC,IAAmDnB,EAAE,CAACgB,GAAH,CAAOI,QAA1D,IAAsE,eAAeC,IAAf,CAAoBC,MAAM,CAACC,SAAP,CAAiBC,SAArC,CAA5F;;AACA,QAAIT,aAAJ,EAAmB;AACff,MAAAA,EAAE,CAACyB,UAAH,CAAcC,SAAd,CAAwBC,oBAAxB,GAA+C,UAAUC,WAAV,EAAuB;AAClE,YAAI,KAAKC,YAAL,GAAoBD,WAApB,GAAkC,KAAtC,EAA6C;AACzC,eAAKE,UAAL;;AACA,eAAKC,QAAL,CAAcC,MAAd;AACH;AACJ,OALD;;AAMAhC,MAAAA,EAAE,CAACyB,UAAH,CAAcC,SAAd,CAAwBO,0BAAxB,GAAqD,YAAY;AAC7D,aAAKH,UAAL;AACA,aAAKI,YAAL;AACH,OAHD;AAIH;AAEH,GA5CG;AA8CLC,EAAAA,KA9CK,mBA8CI;AACL,SAAKC,IAAL,GAAYpC,EAAE,CAACqC,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,WAA/B,CAAZ;AACA,SAAKC,KAAL,GAAavC,EAAE,CAACqC,IAAH,CAAQ,cAAR,EAAwBC,YAAxB,CAAqC,OAArC,CAAb;AACH,GAjDI;AAmDLE,EAAAA,WAnDK,yBAmDQ;AACT,SAAKpC,YAAL,CAAkBqC,MAAlB,GAAyB,IAAzB;AACH,GArDI;AAuDLC,EAAAA,YAvDK,0BAuDS;AACV,SAAKtC,YAAL,CAAkBqC,MAAlB,GAAyB,KAAzB;AACH,GAzDI;AA2DJE,EAAAA,WA3DI,yBA2DS;AACV,QAAG,KAAKJ,KAAL,CAAWK,QAAd,EAAuB;AACnB,WAAKC,QAAL;AACA,WAAKrC,SAAL,CAAesC,MAAf,GAAwB,wCAAxB;AACH,KAHD,MAII;AACA,WAAK1C,YAAL,CAAkBqC,MAAlB,GAAyB,KAAzB;AACA,WAAKL,IAAL,CAAUW,MAAV;AACH;AAEH,GArEG;AAuEJC,EAAAA,QAvEI,sBAuEM;AAEP,QAAG,KAAKT,KAAL,CAAWK,QAAd,EAAuB;AACnB,WAAKC,QAAL;AACA,WAAKrC,SAAL,CAAesC,MAAf,GAAwB,qCAAxB;AACH,KAHD,MAII;AACA9C,MAAAA,EAAE,CAACqC,IAAH,CAAQ,kBAAR,EAA4BC,YAA5B,CAAyC,WAAzC,EAAsDW,MAAtD,GAA+D,IAA/D;AACA,WAAK7C,YAAL,CAAkBqC,MAAlB,GAAyB,KAAzB;AACA,WAAKL,IAAL,CAAUW,MAAV;AACH;AAEH,GAnFG;AAoFJF,EAAAA,QApFI,sBAoFM;AACP,SAAKtC,IAAL,CAAUkC,MAAV,GAAiB,IAAjB;AACF,GAtFG;AAwFJS,EAAAA,SAxFI,uBAwFO;AACR,SAAK3C,IAAL,CAAUkC,MAAV,GAAiB,KAAjB;AACF,GA1FG,CA2FL;;AA3FK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        settingLayer:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        tips:{\r\n            default:null,\r\n            type :cc.Node,\r\n        },\r\n\r\n        tipsLabel:{\r\n            default:null,\r\n            type :cc.Label,\r\n        }\r\n    },\r\n    fullScreen(){\r\n        if(cc.screen.fullScreen()){\r\n            cc.screen.exitFullScreen();\r\n        }\r\n        else{\r\n            cc.screen.requestFullScreen();\r\n        }\r\n      \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n     onLoad () {\r\n        const isIOS14Device = cc.sys.os === cc.sys.OS_IOS && cc.sys.isBrowser && cc.sys.isMobile && /iPhone OS 14/.test(window.navigator.userAgent);\r\n        if (isIOS14Device) {\r\n            cc.MeshBuffer.prototype.checkAndSwitchBuffer = function (vertexCount) {\r\n                if (this.vertexOffset + vertexCount > 65535) {\r\n                    this.uploadData();\r\n                    this._batcher._flush();\r\n                }\r\n            };     \r\n            cc.MeshBuffer.prototype.forwardIndiceStartToOffset = function () {\r\n                this.uploadData();\r\n                this.switchBuffer();\r\n            }  \r\n        }\r\n\r\n     },\r\n\r\n    start () {\r\n        this.game = cc.find(\"Canvas\").getComponent(\"GameScene\");\r\n        this.stage = cc.find(\"Canvas/stage\").getComponent(\"Stage\");\r\n    },\r\n\r\n    openSetting(){\r\n        this.settingLayer.active=true;\r\n    },\r\n\r\n    closeSetting(){\r\n        this.settingLayer.active=false;\r\n    },\r\n\r\n     restartGame(){\r\n        if(this.stage.autoJump){\r\n            this.openTips();\r\n            this.tipsLabel.string = \"Cannot Restart Game While Auto Jumping\";\r\n        } \r\n        else{\r\n            this.settingLayer.active=false;\r\n            this.game.onOver();\r\n        }\r\n       \r\n     },\r\n\r\n     quitGame(){\r\n\r\n        if(this.stage.autoJump){\r\n            this.openTips();\r\n            this.tipsLabel.string = \"Cannot Quit Game While Auto Jumping\";\r\n        }\r\n        else{\r\n            cc.find(\"Canvas/overPanel\").getComponent(\"OverPanel\").isQuit = true;\r\n            this.settingLayer.active=false;\r\n            this.game.onOver();\r\n        }\r\n        \r\n     },\r\n     openTips(){\r\n        this.tips.active=true;\r\n     },\r\n\r\n     closeTips(){\r\n        this.tips.active=false;\r\n     },\r\n    // update (dt) {},\r\n});\r\n"]}